

/*!
 * clipboard.js v2.0.8
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return n={686:function(t,e,n){"use strict";n.d(e,{default:function(){return o}});var e=n(279),i=n.n(e),e=n(370),u=n.n(e),e=n(817),c=n.n(e);function a(t){try{return document.execCommand(t)}catch(t){return}}var f=function(t){t=c()(t);return a("cut"),t};var l=function(t){var e,n,o,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body},i="";return"string"==typeof t?(e=t,n="rtl"===document.documentElement.getAttribute("dir"),(o=document.createElement("textarea")).style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[n?"right":"left"]="-9999px",n=window.pageYOffset||document.documentElement.scrollTop,o.style.top="".concat(n,"px"),o.setAttribute("readonly",""),o.value=e,o=o,r.container.appendChild(o),i=c()(o),a("copy"),o.remove()):(i=c()(t),a("copy")),i};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,o=t.container,e=t.target,t=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==e){if(!e||"object"!==r(e)||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return t?l(t,{container:o}):e?"cut"===n?f(e):l(e,{container:o}):void 0};function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=m(n);return t=o?(t=m(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==d(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){t="data-clipboard-".concat(t);if(e.hasAttribute(t))return e.getAttribute(t)}var o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(r,i());var t,e,n,o=h(r);function r(t,e){var n;return function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(n=o.call(this)).resolveOptions(e),n.listenClick(t),n}return t=r,n=[{key:"copy",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body};return l(t,e)}},{key:"cut",value:function(t){return f(t)}},{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof t?[t]:t,e=!!document.queryCommandSupported;return t.forEach(function(t){e=e&&!!document.queryCommandSupported(t)}),e}}],(e=[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===d(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=u()(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,t=s({action:this.action(e),container:this.container,target:this.target(e),text:this.text(e)});this.emit(t?"success":"error",{action:this.action,text:t,trigger:e,clearSelection:function(){e&&e.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return v("action",t)}},{key:"defaultTarget",value:function(t){t=v("target",t);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(t){return v("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}])&&p(t.prototype,e),n&&p(t,n),r}()},828:function(t){var e;"undefined"==typeof Element||Element.prototype.matches||((e=Element.prototype).matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector),t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var u=n(828);function i(t,e,n,o,r){var i=function(e,n,t,o){return function(t){t.delegateTarget=u(t.target,n),t.delegateTarget&&o.call(e,t)}}.apply(this,arguments);return t.addEventListener(n,i,r),{destroy:function(){t.removeEventListener(n,i,r)}}}t.exports=function(t,e,n,o,r){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,r)}))}},879:function(t,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var f=n(879),l=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!f.string(e))throw new TypeError("Second argument must be a String");if(!f.fn(n))throw new TypeError("Third argument must be a Function");if(f.node(t))return c=e,a=n,(u=t).addEventListener(c,a),{destroy:function(){u.removeEventListener(c,a)}};if(f.nodeList(t))return o=t,r=e,i=n,Array.prototype.forEach.call(o,function(t){t.addEventListener(r,i)}),{destroy:function(){Array.prototype.forEach.call(o,function(t){t.removeEventListener(r,i)})}};if(f.string(t))return t=t,e=e,n=n,l(document.body,t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,r,i,u,c,a}},817:function(t){t.exports=function(t){var e,n="SELECT"===t.nodeName?(t.focus(),t.value):"INPUT"===t.nodeName||"TEXTAREA"===t.nodeName?((e=t.hasAttribute("readonly"))||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),t.value):(t.hasAttribute("contenteditable")&&t.focus(),n=window.getSelection(),(e=document.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(e),n.toString());return n}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function r(){o.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,u=o.length;i<u;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},r={},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o(686).default;function o(t){if(r[t])return r[t].exports;var e=r[t]={exports:{}};return n[t](e,e.exports,o),e.exports}var n,r});

/*  加载进度
 *! NProgress (c) 2013, Rico Sta. Cruz
 *  http://ricostacruz.com/nprogress */
 ;(function(a){if(typeof module==="function"){module.exports=a(this.jQuery||require("jquery"))}else{this.NProgress=a(this.jQuery)}})(function(e){var a={};a.version="0.1.2";var b=a.settings={minimum:0.08,easing:"ease",positionUsing:"",speed:200,trickle:true,trickleRate:0.02,trickleSpeed:800,showSpinner:true,template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};a.configure=function(g){e.extend(b,g);return this};a.status=null;a.set=function(l){var h=a.isStarted();l=f(l,b.minimum,1);a.status=(l===1?null:l);var g=a.render(!h),j=g.find('[role="bar"]'),i=b.speed,k=b.easing;g[0].offsetWidth;g.queue(function(m){if(b.positionUsing===""){b.positionUsing=a.getPositioningCSS()}j.css(c(l,i,k));if(l===1){g.css({transition:"none",opacity:1});g[0].offsetWidth;setTimeout(function(){g.css({transition:"all "+i+"ms linear",opacity:0});setTimeout(function(){a.remove();m()},i)},i)}else{setTimeout(m,i)}});return this};a.isStarted=function(){return typeof a.status==="number"};a.start=function(){if(!a.status){a.set(0)}var g=function(){setTimeout(function(){if(!a.status){return}a.trickle();g()},b.trickleSpeed)};if(b.trickle){g()}return this};a.done=function(g){if(!g&&!a.status){return this}return a.inc(0.3+0.5*Math.random()).set(1)};a.inc=function(g){var h=a.status;if(!h){return a.start()}else{if(typeof g!=="number"){g=(1-h)*f(Math.random()*h,0.1,0.95)}h=f(h+g,0,0.994);return a.set(h)}};a.trickle=function(){return a.inc(Math.random()*b.trickleRate)};a.render=function(g){if(a.isRendered()){return e("#nprogress")}e("html").addClass("nprogress-busy");var i=e("<div id='nprogress'>").html(b.template);var h=g?"-100":d(a.status||0);i.find('[role="bar"]').css({transition:"all 0 linear",transform:"translate3d("+h+"%,0,0)"});if(!b.showSpinner){i.find('[role="spinner"]').remove()}i.appendTo(document.body);return i};a.remove=function(){e("html").removeClass("nprogress-busy");e("#nprogress").remove()};a.isRendered=function(){return(e("#nprogress").length>0)};a.getPositioningCSS=function(){var g=document.body.style;var h=("WebkitTransform" in g)?"Webkit":("MozTransform" in g)?"Moz":("msTransform" in g)?"ms":("OTransform" in g)?"O":"";if(h+"Perspective" in g){return"translate3d"}else{if(h+"Transform" in g){return"translate"}else{return"margin"}}};function f(i,h,g){if(i<h){return h}if(i>g){return g}return i}function d(g){return(-1+g)*100}function c(j,h,i){var g;if(b.positionUsing==="translate3d"){g={transform:"translate3d("+d(j)+"%,0,0)"}}else{if(b.positionUsing==="translate"){g={transform:"translate("+d(j)+"%,0)"}}else{g={"margin-left":d(j)+"%"}}}g.transition="all "+h+"ms "+i;return g}return a});

 NProgress.configure({speed: 80,showSpinner: false});

 /*提示信息插件*/
;(function(global,$){var cssMap={'.toast-message':'{position:fixed;left:50%;top:10%;transform:translateX(-50%);border:1px solid #EBEEF5;min-width:380px;transition:top .3s ease-out;opacity .3s ease-out;padding:15px 15px 15px 20px;display:flex;align-items:center;z-index:2000;}','.toast-icon':'{position:relative;margin-right:10px;line-height:1;display:inline-block;-webkit-font-smoothing:antialiased;font-size:14px;font:normal normal normal 14px/1 FontAwesome;text-rendering:auto;}','.toast-message__closeBtn':'{position:absolute;top:50%;right:15px;transform:translateY(-50%);cursor:pointer;color:#C0C4CC;font-size:16px;width:26px;height:26px;line-height:26px;text-align:center;}','.toast-message .toast-message__content':'{padding-right:10px;}','.toast-message__closeBtn:before':'{position:absolute;display:block;left:0;top:0;width:100%;height:100%;content:"×";font-size:16px;}','.toast-message--info':'{border-color:#EBEEF5;background-color:#edf2fc;}','.toast-message--info .toast-icon':'{margin-right:18px;}','.toast-message--info .toast-message__content':'{color:#909399;}','.toast-icon--info:before':'{content:"i";color:#fff;}','.toast-icon--info:after':'{display:block;position:absolute;content:"";width:20px;height:20px;line-height:20px;background:#909399;left:-8px;top:-3px;border-radius:50%;text-align:center;z-index:-1;}','.toast-message--success':'{border-color:#e1f3d8;background-color:#f0f9eb;}','.toast-message--success .toast-icon':'{margin-right:15px;}','.toast-message--success .toast-message__content':'{color:#67C23A;}','.toast-icon--success:before':'{content:"✔";color:#fff;}','.toast-icon--success:after':'{display:block;position:absolute;content:"";width:20px;height:20px;line-height:20px;background:#67C23A;left:-5px;top:-3px;border-radius:50%;text-align:center;z-index:-1;}','.toast-message--warning':'{border-color:#faecd8;background-color:#fdf6ec;}','.toast-message--warning .toast-icon':'{margin-right:16px;}','.toast-message--warning .toast-message__content':'{color:#E6A23C;}','.toast-icon--warning:before':'{content:"!";color:#fff;font-weight:bold;}','.toast-icon--warning:after':'{display:block;position:absolute;content:"";width:20px;height:20px;line-height:20px;background:#E6A23C;left:-8px;top:-3px;border-radius:50%;text-align:center;z-index:-1;}','.toast-message--error':'{border-color:#fde2e2;background-color:#fef0f0;font-weight:bold;}','.toast-message--error .toast-icon':'{margin-right:15px;}','.toast-message--error .toast-message__content':'{color:#F56C6C;}','.toast-icon--error:before':'{content:"×";color:#fff;}','.toast-icon--error:after':'{display:block;position:absolute;content:"";width:20px;height:20px;line-height:20px;background:#F56C6C;left:-5px;top:-3px;border-radius:50%;text-align:center;z-index:-1;}'}
function generateCss(map){if(document.querySelector('#message_style')){return}
var str='';for(var item in map){str+=item+map[item]}
var st=createEle('style',{attrs:{id:'message_style'},props:{innerHTML:str}});document.querySelector('head').appendChild(st);updateIECss()}
generateCss(cssMap);function createEle(tag,option,children){var ele=document.createElement(tag);if(option.attrs){for(var i in option.attrs){ele.setAttribute(i,option.attrs[i])}}
if(option.props){for(var i in option.props){ele[i]=option.props[i]}}
if(children&&children.length){for(var i=0;i<children.length;i++){if(children[i]){ele.appendChild(children[i])}}}
return ele}
function closeEle(cb){return function(){!isIE()?window.event.target.closest(".toast-message").remove():window.event.target.parents(".toast-message").removeNode();typeof cb=='function'&&cb();}}
function updateIECss(){if(isIE()){var str='.toast-icon--success:after{left:-5px;}.toast-icon--warning:after{left:-8px;}.toast-icon--error:after{left:-6px;}';document.querySelector('#message_style').innerHTML+=str;}}
function isIE(){return /(MSIE)|(Trident)|(Edge)/.test(navigator.userAgent)}
$.message=function(options){if(options){options=typeof options=='string'?{type:'info',message:options}:options;options.type=options.type||'info';var ele=createEle('div',{attrs:{class:"toast-message "+(options.type?'toast-message--'+options.type:''),}},[options.type?createEle('i',{attrs:{class:"toast-icon "+(options.type?'toast-icon--'+options.type:''),}},[]):null,createEle('div',{attrs:{class:"toast-message__content"},props:{innerHTML:options.message}}),options.showClose?createEle('i',{attrs:{class:"toast-message__closeBtn"},props:{onclick:closeEle(options.onClose)}}):null]);var currentEle=document.querySelector('.toast-message');if(currentEle){!isIE()?currentEle.remove():currentEle.removeNode();}
ele.style.top=options.center?"40%":"0";ele.style.opacity=".3";document.body.appendChild(ele);setTimeout(function(){ele.style.top="90px";ele.style.opacity="1";if(options.center){ele.style.top="50%";ele.style.transform="translate(-50%)";}},isIE()?10:5);if(options.duration!=0){setTimeout(function(){!isIE()?(ele&&ele.remove()):(ele&&ele.removeNode())},options.duration||5000)}}}
$.message.version="1.0";})(this,typeof jQuery!='undefined'?jQuery:this);


/*!
 * jQuery Mobile Events
 * by Ben Major
 *
 * Copyright 2011-2019, Ben Major
 * Licensed under the MIT License:
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 * 
 */
"use strict";!function(e){e.attrFn=e.attrFn||{};var t="ontouchstart"in window,a={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,shake_threshold:15,touch_capable:t,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:t?"touchstart":"mousedown",endevent:t?"touchend":"mouseup",moveevent:t?"touchmove":"mousemove",tapevent:t?"tap":"click",scrollevent:t?"touchmove":"scroll",hold_timer:null,tap_timer:null};e.touch={},e.isTouchCapable=function(){return a.touch_capable},e.getStartEvent=function(){return a.startevent},e.getEndEvent=function(){return a.endevent},e.getMoveEvent=function(){return a.moveevent},e.getTapEvent=function(){return a.tapevent},e.getScrollEvent=function(){return a.scrollevent},e.touch.setSwipeThresholdX=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");a.swipe_h_threshold=e},e.touch.setSwipeThresholdY=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");a.swipe_v_threshold=e},e.touch.setDoubleTapInt=function(e){if("number"!=typeof e)throw new Error("Interval parameter must be a type of number");a.doubletap_int=e},e.touch.setTapHoldThreshold=function(e){if("number"!=typeof e)throw new Error("Threshold parameter must be a type of number");a.taphold_threshold=e},e.touch.setTapRange=function(e){if("number"!=typeof e)throw new Error("Ranger parameter must be a type of number");a.tap_pixel_range=threshold},e.each(["tapstart","tapend","tapmove","tap","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange","tap2","taphold2"],function(t,a){e.fn[a]=function(e){return e?this.on(a,e):this.trigger(a)},e.attrFn[a]=!0}),e.event.special.tapstart={setup:function(){var t=this,o=e(t);o.on(a.startevent,function e(n){if(o.data("callee",e),n.which&&1!==n.which)return!1;var i=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},r=n.originalEvent,p={position:{x:a.touch_capable?r.touches[0].pageX:n.pageX,y:a.touch_capable?r.touches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(r.changedTouches[0].pageX-i.left):Math.round(n.pageX-i.left),y:a.touch_capable?Math.round(r.changedTouches[0].pageY-i.top):Math.round(n.pageY-i.top)},time:Date.now(),target:n.target};return w(t,"tapstart",n,p),!0})},remove:function(){e(this).off(a.startevent,e(this).data.callee)}},e.event.special.tapmove={setup:function(){var t=this,o=e(t);o.on(a.moveevent,function e(n){o.data("callee",e);var i=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},r=n.originalEvent,p={position:{x:a.touch_capable?r.touches[0].pageX:n.pageX,y:a.touch_capable?r.touches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(r.changedTouches[0].pageX-i.left):Math.round(n.pageX-i.left),y:a.touch_capable?Math.round(r.changedTouches[0].pageY-i.top):Math.round(n.pageY-i.top)},time:Date.now(),target:n.target};return w(t,"tapmove",n,p),!0})},remove:function(){e(this).off(a.moveevent,e(this).data.callee)}},e.event.special.tapend={setup:function(){var t=this,o=e(t);o.on(a.endevent,function e(n){o.data("callee",e);var i=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},r=n.originalEvent,p={position:{x:a.touch_capable?r.changedTouches[0].pageX:n.pageX,y:a.touch_capable?r.changedTouches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(r.changedTouches[0].pageX-i.left):Math.round(n.pageX-i.left),y:a.touch_capable?Math.round(r.changedTouches[0].pageY-i.top):Math.round(n.pageY-i.top)},time:Date.now(),target:n.target};return w(t,"tapend",n,p),!0})},remove:function(){e(this).off(a.endevent,e(this).data.callee)}},e.event.special.taphold={setup:function(){var t,o=this,n=e(o),i={x:0,y:0},r=0,p=0;n.on(a.startevent,function e(h){if(h.which&&1!==h.which)return!1;n.data("tapheld",!1),t=h.target;var c=h.originalEvent,s=Date.now();a.touch_capable?c.touches[0].pageX:h.pageX,a.touch_capable?c.touches[0].pageY:h.pageY,a.touch_capable?(c.touches[0].pageX,c.touches[0].target.offsetLeft):h.offsetX,a.touch_capable?(c.touches[0].pageY,c.touches[0].target.offsetTop):h.offsetY;i.x=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageX:h.pageX,i.y=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageY:h.pageY,r=i.x,p=i.y;var u=n.parent().data("threshold")?n.parent().data("threshold"):n.data("threshold"),l=void 0!==u&&!1!==u&&parseInt(u)?parseInt(u):a.taphold_threshold;return n.data("hold_timer",window.setTimeout(function(){var u=i.x-r,l=i.y-p;if(h.target==t&&(i.x==r&&i.y==p||u>=-a.tap_pixel_range&&u<=a.tap_pixel_range&&l>=-a.tap_pixel_range&&l<=a.tap_pixel_range)){n.data("tapheld",!0);for(var g=Date.now()-s,d=h.originalEvent.targetTouches?h.originalEvent.targetTouches:[h],f=[],v=n.get(0)!==window&&n.get(0)!==document?n.offset():{left:0,top:0},_=0;_<d.length;_++){var m={position:{x:a.touch_capable?c.changedTouches[_].pageX:h.pageX,y:a.touch_capable?c.changedTouches[_].pageY:h.pageY},offset:{x:a.touch_capable?Math.round(c.changedTouches[_].pageX-v.left):Math.round(h.pageX-v.left),y:a.touch_capable?Math.round(c.changedTouches[_].pageY-v.top):Math.round(h.pageY-v.top)},time:Date.now(),target:h.target,duration:g};f.push(m)}var T=2==d.length?"taphold2":"taphold";n.data("callee1",e),w(o,T,h,f)}},l)),!0}).on(a.endevent,function e(){n.data("callee2",e),n.data("tapheld",!1),window.clearTimeout(n.data("hold_timer"))}).on(a.moveevent,function e(t){n.data("callee3",e),r=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,p=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2).off(a.moveevent,e(this).data.callee3)}},e.event.special.doubletap={setup:function(){var t,o,n=this,i=e(n),r=null,p=!1;i.on(a.startevent,function t(n){if(n.which&&1!==n.which)return!1;if(i.data("doubletapped",!1),n.target,i.data("callee1",t),o=n.originalEvent,!r){var p=i.get(0)!==window&&i.get(0)!==document?i.offset():{left:0,top:0};r={position:{x:a.touch_capable?o.touches[0].pageX:n.pageX,y:a.touch_capable?o.touches[0].pageY:n.pageY},offset:{x:a.touch_capable?Math.round(o.changedTouches[0].pageX-p.left):Math.round(n.pageX-p.left),y:a.touch_capable?Math.round(o.changedTouches[0].pageY-p.top):Math.round(n.pageY-p.top)},time:Date.now(),target:n.target,element:n.originalEvent.srcElement,index:e(n.target).index()}}return!0}).on(a.endevent,function h(c){var s=Date.now(),u=s-(i.data("lastTouch")||s+1);if(window.clearTimeout(t),i.data("callee2",h),u<a.doubletap_int&&e(c.target).index()==r.index&&u>100){i.data("doubletapped",!0),window.clearTimeout(a.tap_timer);var l=i.get(0)!==window&&i.get(0)!==document?i.offset():{left:0,top:0},g={position:{x:a.touch_capable?c.originalEvent.changedTouches[0].pageX:c.pageX,y:a.touch_capable?c.originalEvent.changedTouches[0].pageY:c.pageY},offset:{x:a.touch_capable?Math.round(o.changedTouches[0].pageX-l.left):Math.round(c.pageX-l.left),y:a.touch_capable?Math.round(o.changedTouches[0].pageY-l.top):Math.round(c.pageY-l.top)},time:Date.now(),target:c.target,element:c.originalEvent.srcElement,index:e(c.target).index()},d={firstTap:r,secondTap:g,interval:g.time-r.time};p||(w(n,"doubletap",c,d),r=null),p=!0,window.setTimeout(function(){p=!1},a.doubletap_int)}else i.data("lastTouch",s),t=window.setTimeout(function(){r=null,window.clearTimeout(t)},a.doubletap_int,[c]);i.data("lastTouch",s)})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2)}},e.event.special.singletap={setup:function(){var t=this,o=e(t),n=null,i=null,r={x:0,y:0};o.on(a.startevent,function e(t){return(!t.which||1===t.which)&&(i=Date.now(),n=t.target,o.data("callee1",e),r.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,r.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,!0)}).on(a.endevent,function e(p){if(o.data("callee2",e),p.target==n){var h=p.originalEvent.changedTouches?p.originalEvent.changedTouches[0].pageX:p.pageX,c=p.originalEvent.changedTouches?p.originalEvent.changedTouches[0].pageY:p.pageY;a.tap_timer=window.setTimeout(function(){var e=r.x-h,n=r.y-c;if(!o.data("doubletapped")&&!o.data("tapheld")&&(r.x==h&&r.y==c||e>=-a.tap_pixel_range&&e<=a.tap_pixel_range&&n>=-a.tap_pixel_range&&n<=a.tap_pixel_range)){var s=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},u=p.originalEvent,l={position:{x:a.touch_capable?u.changedTouches[0].pageX:p.pageX,y:a.touch_capable?u.changedTouches[0].pageY:p.pageY},offset:{x:a.touch_capable?Math.round(u.changedTouches[0].pageX-s.left):Math.round(p.pageX-s.left),y:a.touch_capable?Math.round(u.changedTouches[0].pageY-s.top):Math.round(p.pageY-s.top)},time:Date.now(),target:p.target};l.time-i<a.taphold_threshold&&w(t,"singletap",p,l)}},a.doubletap_int)}})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2)}},e.event.special.tap={setup:function(){var t,o,n=this,i=e(n),r=!1,p=null,h={x:0,y:0};i.on(a.startevent,function e(a){return i.data("callee1",e),(!a.which||1===a.which)&&(r=!0,h.x=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageX:a.pageX,h.y=a.originalEvent.targetTouches?a.originalEvent.targetTouches[0].pageY:a.pageY,t=Date.now(),p=a.target,o=a.originalEvent.targetTouches?a.originalEvent.targetTouches:[a],!0)}).on(a.endevent,function e(c){i.data("callee2",e);var s=c.originalEvent.targetTouches?c.originalEvent.changedTouches[0].pageX:c.pageX,u=c.originalEvent.targetTouches?c.originalEvent.changedTouches[0].pageY:c.pageY,l=h.x-s,g=h.y-u;if(p==c.target&&r&&Date.now()-t<a.taphold_threshold&&(h.x==s&&h.y==u||l>=-a.tap_pixel_range&&l<=a.tap_pixel_range&&g>=-a.tap_pixel_range&&g<=a.tap_pixel_range)){for(var d=i.get(0)!==window&&i.get(0)!==document?i.offset():{left:0,top:0},f=c.originalEvent,v=[],_=0;_<o.length;_++){var m={position:{x:a.touch_capable?f.changedTouches[_].pageX:c.pageX,y:a.touch_capable?f.changedTouches[_].pageY:c.pageY},offset:{x:a.touch_capable?Math.round(f.changedTouches[_].pageX-d.left):Math.round(c.pageX-d.left),y:a.touch_capable?Math.round(f.changedTouches[_].pageY-d.top):Math.round(c.pageY-d.top)},time:Date.now(),target:c.target};v.push(m)}var T=2==o.length?"tap2":"tap";w(n,T,c,v)}})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.endevent,e(this).data.callee2)}},e.event.special.swipe={setup:function(){var t,o=e(this),n=!1,i=!1,r={x:0,y:0},p={x:0,y:0};o.on(a.startevent,function i(h){(o=e(h.currentTarget)).data("callee1",i),r.x=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageX:h.pageX,r.y=h.originalEvent.targetTouches?h.originalEvent.targetTouches[0].pageY:h.pageY,p.x=r.x,p.y=r.y,n=!0;var c=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},s=h.originalEvent;t={position:{x:a.touch_capable?s.touches[0].pageX:h.pageX,y:a.touch_capable?s.touches[0].pageY:h.pageY},offset:{x:a.touch_capable?Math.round(s.changedTouches[0].pageX-c.left):Math.round(h.pageX-c.left),y:a.touch_capable?Math.round(s.changedTouches[0].pageY-c.top):Math.round(h.pageY-c.top)},time:Date.now(),target:h.target}}),o.on(a.moveevent,function h(c){var s;(o=e(c.currentTarget)).data("callee2",h),p.x=c.originalEvent.targetTouches?c.originalEvent.targetTouches[0].pageX:c.pageX,p.y=c.originalEvent.targetTouches?c.originalEvent.targetTouches[0].pageY:c.pageY;var u=o.parent().data("xthreshold")?o.parent().data("xthreshold"):o.data("xthreshold"),l=o.parent().data("ythreshold")?o.parent().data("ythreshold"):o.data("ythreshold"),g=void 0!==u&&!1!==u&&parseInt(u)?parseInt(u):a.swipe_h_threshold,d=void 0!==l&&!1!==l&&parseInt(l)?parseInt(l):a.swipe_v_threshold;if(Math.abs(p.x-r.x)>Math.abs(p.y-r.y)?(r.x<p.x&&p.x-r.x>g&&(s="swiperight"),r.x>p.x&&r.x-p.x>g&&(s="swipeleft")):(r.y>p.y&&r.y-p.y>d&&(s="swipeup"),r.y<p.y&&p.y-r.y>d&&(s="swipedown")),null!=s&&n){r.x=0,r.y=0,p.x=0,p.y=0,n=!1;var f=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},v=c.originalEvent,w={position:{x:a.touch_capable?v.touches[0].pageX:c.pageX,y:a.touch_capable?v.touches[0].pageY:c.pageY},offset:{x:a.touch_capable?Math.round(v.changedTouches[0].pageX-f.left):Math.round(c.pageX-f.left),y:a.touch_capable?Math.round(v.changedTouches[0].pageY-f.top):Math.round(c.pageY-f.top)},time:Date.now(),target:c.target},_=Math.abs(t.position.x-w.position.x),m=Math.abs(t.position.y-w.position.y),T={startEvnt:t,endEvnt:w,direction:s.replace("swipe",""),xAmount:_,yAmount:m,duration:w.time-t.time};i=!0,o.trigger("swipe",T).trigger(s,T)}}),o.on(a.endevent,function r(p){var h="";if((o=e(p.currentTarget)).data("callee3",r),i){var c=o.data("xthreshold"),s=o.data("ythreshold"),u=void 0!==c&&!1!==c&&parseInt(c)?parseInt(c):a.swipe_h_threshold,l=void 0!==s&&!1!==s&&parseInt(s)?parseInt(s):a.swipe_v_threshold,g=o.get(0)!==window&&o.get(0)!==document?o.offset():{left:0,top:0},d=p.originalEvent,f={position:{x:a.touch_capable?d.changedTouches[0].pageX:p.pageX,y:a.touch_capable?d.changedTouches[0].pageY:p.pageY},offset:{x:a.touch_capable?Math.round(d.changedTouches[0].pageX-g.left):Math.round(p.pageX-g.left),y:a.touch_capable?Math.round(d.changedTouches[0].pageY-g.top):Math.round(p.pageY-g.top)},time:Date.now(),target:p.target},v=Math.abs(t.position.x-f.position.x),w=Math.abs(t.position.y-f.position.y);v>w?(t.position.x<f.position.x&&f.position.x-t.position.x>u&&(h="swiperight"),t.position.x>f.position.x&&t.position.x-f.position.x>u&&(h="swipeleft")):(t.position.y>f.position.y&&t.position.y-f.position.y>l&&(h="swipeup"),t.position.y<f.position.y&&f.position.y-t.position.y>l&&(h="swipedown"));var _={startEvnt:t,endEvnt:f,direction:h.replace("swipe",""),xAmount:v,yAmount:w,duration:f.time-t.time};o.trigger("swipeend",_)}n=!1,i=!1})},remove:function(){e(this).off(a.startevent,e(this).data.callee1).off(a.moveevent,e(this).data.callee2).off(a.endevent,e(this).data.callee3)}},e.event.special.scrollstart={setup:function(){var t,o,n=this,i=e(n);function r(e,a){w(n,(t=a)?"scrollstart":"scrollend",e)}i.on(a.scrollevent,function e(a){i.data("callee",e),t||r(a,!0),clearTimeout(o),o=setTimeout(function(){r(a,!1)},50)})},remove:function(){e(this).off(a.scrollevent,e(this).data.callee)}};var o,n,i,r,p=e(window),h={0:!0,180:!0};if(a.orientation_support){var c=window.innerWidth||p.width(),s=window.innerHeight||p.height();i=c>s&&c-s>50,r=h[window.orientation],(i&&r||!i&&!r)&&(h={"-90":!0,90:!0})}function u(){var e=o();e!==n&&(n=e,p.trigger("orientationchange"))}e.event.special.orientationchange={setup:function(){return!a.orientation_support&&(n=o(),p.on("throttledresize",u),!0)},teardown:function(){return!a.orientation_support&&(p.off("throttledresize",u),!0)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=o(),t.apply(this,arguments)}}},e.event.special.orientationchange.orientation=o=function(){var e=document.documentElement;return(a.orientation_support?h[window.orientation]:e&&e.clientWidth/e.clientHeight<1.1)?"portrait":"landscape"},e.event.special.throttledresize={setup:function(){e(this).on("resize",f)},teardown:function(){e(this).off("resize",f)}};var l,g,d,f=function(){g=Date.now(),(d=g-v)>=250?(v=g,e(this).trigger("throttledresize")):(l&&window.clearTimeout(l),l=window.setTimeout(u,250-d))},v=0;function w(t,a,o,n){var i=o.type;o.type=a,e.event.dispatch.call(t,o,n),o.type=i}e.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap",taphold2:"taphold"},function(t,a){e.event.special[t]={setup:function(){e(this).on(a,e.noop)}}})}(jQuery);

/*! Zoomify - v0.2.4 - https://github.com/indrimuska/zoomify - (c) 2015 Indri Muska - MIT */
!function(a){Zoomify=function(b,c){var d=this;this._zooming=!1,this._zoomed=!1,this._timeout=null,this.$shadow=null,this.$image=a(b).addClass("zoomify"),this.options=a.extend({},Zoomify.DEFAULTS,this.$image.data(),c),this.$image.on("click",function(){d.zoom()}),a(window).on("resize",function(){d.reposition()}),a(document).on("scroll",function(){d.reposition()})},Zoomify.DEFAULTS={duration:200,easing:"linear",scale:.9},Zoomify.prototype.transition=function(a,b){a.css({"-webkit-transition":b,"-moz-transition":b,"-ms-transition":b,"-o-transition":b,transition:b})},Zoomify.prototype.addTransition=function(a){this.transition(a,"all "+this.options.duration+"ms "+this.options.easing)},Zoomify.prototype.removeTransition=function(b,c){var d=this;clearTimeout(this._timeout),this._timeout=setTimeout(function(){d.transition(b,""),a.isFunction(c)&&c.call(d)},this.options.duration)},Zoomify.prototype.transform=function(a){this.$image.css({"-webkit-transform":a,"-moz-transform":a,"-ms-transform":a,"-o-transform":a,transform:a})},Zoomify.prototype.transformScaleAndTranslate=function(a,b,c,d){this.addTransition(this.$image),this.transform("scale("+a+") translate("+b+"px, "+c+"px)"),this.removeTransition(this.$image,d)},Zoomify.prototype.zoom=function(){this._zooming||(this._zoomed?this.zoomOut():this.zoomIn())},Zoomify.prototype.zoomIn=function(){var b=this,c=this.$image.css("transform");this.transition(this.$image,"none"),this.transform("none");var d=this.$image.offset(),e=this.$image.outerWidth(),f=this.$image.outerHeight(),g=this.$image[0].naturalWidth||+(1/0),h=this.$image[0].naturalHeight||+(1/0),i=a(window).width(),j=a(window).height(),k=Math.min(g,i*this.options.scale)/e,l=Math.min(h,j*this.options.scale)/f,m=Math.min(k,l),n=(-d.left+(i-e)/2)/m,o=(-d.top+(j-f)/2+a(document).scrollTop())/m;this.transform(c),this._zooming=!0,this.$image.addClass("zoomed").trigger("zoom-in.zoomify"),setTimeout(function(){b.addShadow(),b.transformScaleAndTranslate(m,n,o,function(){b._zooming=!1,b.$image.trigger("zoom-in-complete.zoomify")}),b._zoomed=!0})},Zoomify.prototype.zoomOut=function(){var a=this;this._zooming=!0,this.$image.trigger("zoom-out.zoomify"),this.transformScaleAndTranslate(1,0,0,function(){a._zooming=!1,a.$image.removeClass("zoomed").trigger("zoom-out-complete.zoomify")}),this.removeShadow(),this._zoomed=!1},Zoomify.prototype.reposition=function(){this._zoomed&&(this.transition(this.$image,"none"),this.zoomIn())},Zoomify.prototype.addShadow=function(){var b=this;this._zoomed||(b.$shadow&&b.$shadow.remove(),this.$shadow=a('<div class="zoomify-shadow"></div>'),a("body").append(this.$shadow),this.addTransition(this.$shadow),this.$shadow.on("click",function(){b.zoomOut()}),setTimeout(function(){b.$shadow.addClass("zoomed")},10))},Zoomify.prototype.removeShadow=function(){var a=this;this.$shadow&&(this.addTransition(this.$shadow),this.$shadow.removeClass("zoomed"),this.$image.one("zoom-out-complete.zoomify",function(){a.$shadow&&a.$shadow.remove(),a.$shadow=null}))},a.fn.zoomify=function(b){return this.each(function(){var c=a(this),d=c.data("zoomify");d||c.data("zoomify",d=new Zoomify(this,"object"==typeof b&&b)),"string"==typeof b&&["zoom","zoomIn","zoomOut","reposition"].indexOf(b)>=0&&d[b]()})}}(jQuery);

var searchEmpty = function(){
	var thisbtn = $(".abtn[name='search']");
	$(".abtn[name='search']").siblings("input").val("");
	thisbtn.children("i").addClass("icon-sousuo").removeClass("icon-guanbi");
	$("#catalog-list").removeClass("hide");
	$("#catalog-search").addClass("hide").html("");
}
var getPrevNext = function(){
	var linkList = $("#catalog-list .catalog-li a");
	var thisactive = $("#catalog-list .catalog-li.active");
	var thisHref = thisactive.children("a").attr("href");
	
	var prevBox = $(".article-foot>.prev");
	var nextBox = $(".article-foot>.next");
	var prevA = prevBox.children("a");
	var nextA = nextBox.children("a");
	var prev = "";
	var prevUrl = "";
	var next = "";
	var nextUrl = "";
	
	linkList.each(function(index){
		if($(this).attr("href")==thisHref){
			if(index>0){
				var thisprev = linkList.eq(index-1);
				prev = thisprev.text();
				prevUrl = "#"+thisprev.attr("href");
			}
			if(index<linkList.length){
				var thisnext = linkList.eq(index+1);
				next = thisnext.text();
				nextUrl = "#"+thisnext.attr("href");
			}
			return false;
		}
	})
	
	if(prev){
		prevA.text(prev).attr("href",prevUrl);
		prevBox.removeClass("hide");
	}else{
		prevBox.addClass("hide");
	}
	if(next){
		nextA.text(next).attr("href",nextUrl);
		nextBox.removeClass("hide");
	}else{
		nextBox.addClass("hide");
	}
}

var hashchange = function(){
	if(location.hash){
	//if(location.hash && $(".article-body [href='"+location.hash+"']").length==0){
		var thisHref = location.hash.replace("#","");
		//console.log(thisHref)
		$("#catalog-list .active,#catalog-search .active").removeClass("active");
		$(".catalog-li a[href='"+thisHref+"']").parent(".catalog-li").addClass("active");
		NProgress.start();
		$(".article-body").load("page/"+thisHref+".txt",function(res,status){
			if(status=="error"){
				if(~window.location.href.indexOf("http")){
					$.message({
						message:"页面不存在",
						type:'error'
					});
				}else{
					if(!$(".article-body").hasClass("exe")){
						$.message({
							message:"请在Web环境下使用！",
							type:'error'
						});
					}
				}
			}
			Prism.highlightAll();//代码高亮重新渲染
			$(".article-head>h1").text($(".catalog-box .catalog-li.active").text());
			getPrevNext();
			$('.article.scroll').scrollTop(0);
			NProgress.done();
			//图片点击放大
			$('.article img').zoomify();
		});
	}
}

var catalogList = $("#catalog-list .catalog-li");

$(function(){
	getPrevNext();
	$("body").on("click",".catalog-li>i",function(){
		var nextBox = $(this).parent().next();
		if(nextBox.hasClass("hide")){
			$(this).addClass("icon-cart-down").removeClass("icon-cart-right");
			nextBox.removeClass("hide");
		}else{
			$(this).addClass("icon-cart-right").removeClass("icon-cart-down");
			nextBox.addClass("hide");
		}
	})
	$("body").on("click",".abtn",function(e){
		var thisname = $(this).attr("name");
		switch(thisname){
			case "search":
				var thisi = $(this).children("i");
				if(thisi.hasClass("icon-sousuo")){
					
				}else{
					searchEmpty();
				}
			break;
			case "catalog":
				if($(".sidebar").hasClass("active")){
					$(".sidebar,.workspace").removeClass("active");
				}else{
					$(".sidebar,.workspace").addClass("active");
				}
			break;
			case "share":
				e.stopPropagation();//阻止点击事件向上冒泡
				$(this).addClass("active");
				$(".shareBox").removeClass("hide");
			break;
		}
	})
	$("body").on('input propertychange',".top-search", function() {
		var val = $(this).val();
		var thisi = $(this).siblings("a").children("i");
		if(val!==""){
			thisi.addClass("icon-guanbi").removeClass("icon-sousuo");
			$("#catalog-list").addClass("hide");
			$("#catalog-search").removeClass("hide");
			
			var catalogSearch = "";
			//搜索
			catalogList.each(function(){
				var thisa = $(this).children("a");
				var thisname = thisa.text();
				if(~thisname.indexOf(val)){
					catalogSearch += '<div class="catalog-li">'+thisa.prop("outerHTML")+'</div>';
				}
			})
			$("#catalog-search").html(catalogSearch);
			if(catalogSearch==""){
				$("#catalog-search").addClass("no-search");
			}else{
				$("#catalog-search").removeClass("no-search");
			}
		}else{
			searchEmpty();
		}
	})
	
	$("body").on("click",".catalog-li",function(){
		var thisHref = $(this).children("a").attr("href");
		window.location.href = "#"+thisHref;
		//History.back();
	})
	
	hashchange();
	window.onhashchange = hashchange;
	//代码高亮
	
	
	//隐藏分享窗口
	$(document).on("click",function(){
		if($(this).parents(".shareBox").length==0 && !$(".shareBox").hasClass("hide")){
			$(".shareBox").addClass("hide");
			$(".abtn[name='share']").removeClass("active");
		}
	})

	//如果是http状态下
	if(~window.location.href.indexOf("http")){
		//生成二维码
		$('#qrcode').qrcode({
			render: "canvas",
			text: window.location.href
		});
		//复制链接
		$("#copyLink").attr("data-clipboard-text",window.location.href);
		var clipboard = new ClipboardJS('#copyLink');
		clipboard.on('success', function(e) {
			$.message({
				message:"链接已复制到剪贴板",
				type:'success'
			});
			e.clearSelection();
		});
		clipboard.on('error', function(e) {
			$.message({
				message:"链接复制失败",
				type:'error'
			});
		});
		//获取页面的图片
		var pics = "";
		if($(".article-body img").length>0){
			pics = window.location.protocol+"//"+window.location.host+window.location.pathname + $(".article-body img").eq(0).attr("src");
		}
		//QQ分享链接
		var qqShare = {
			url: window.location.href,/*获取URL，可加上来自分享到QQ标识，方便统计*/
            desc:'分享一本不错的电子书：'+$("title").text(), /*分享理由(风格应模拟用户对话),支持多分享语随机展现（使用|分隔）*/
            title:$("title").text(),/*分享标题(可选)*/
            summary:$("meta[name='description']").attr("content"),/*分享描述(可选)*/
            pics:pics,/*分享图片(可选)*/
            site:window.location.host
		}
		var s = [];
		for (var i in qqShare) {
			s.push(i + '=' + encodeURIComponent(qqShare[i] || ''));
		}
		var qqShareUrl = "https://connect.qq.com/widget/shareqq/index.html?" + s.join('&') ;
		$("#qqShare").attr("href",qqShareUrl);
		//新浪微博分享链接
		var weiboShare = {
			url:window.location.href,
			title:$("title").text(),
			pic:pics
		}
		var x = [];
		for (var i in weiboShare) {
			x.push(i + '=' + encodeURIComponent(weiboShare[i] || ''));
		}
		var weiboShareUrl = "https://service.weibo.com/share/share.php?" + x.join('&') ;
		$("#weiboShare").attr("href",weiboShareUrl);
	}else{
		$(".abtn[name='share']").addClass("hide");
		$("body").on('click',"a[href]", function(e) { 
			if(~$(this).attr("href").indexOf("http")){
				try {
					external.go($(this).attr("href"));
					return false;
				} catch (error) {}
			}
		});
	}

	//手机端隐藏侧边栏
	if($(window).width()<=600){
		$(".sidebar,.workspace").removeClass("active");
	}

	//滑动打开目录
	$("body").on('swipeleft', function(e) { 
		// 向左滑动执行
		$(".sidebar,.workspace").removeClass("active");
	});
	$("body").on('swiperight', function(e) { 
		// 向右滑动执行
		$(".sidebar,.workspace").addClass("active");
	});
	//图片点击放大
	$('.article img').zoomify();
})
